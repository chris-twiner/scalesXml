
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://scalesxml.github.io/scales-xml_2.10/0.6.0-M5/Accessing_and_Querying_Data/XPaths/" rel="canonical"/>
<link href="../../Parsing_XML/AsyncPull/" rel="prev"/>
<link href="../XPathFunctions/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.1.2" name="generator"/>
<title>XPath Embedded DSL - Scales Xml</title>
<link href="../../assets/stylesheets/main.7bf56d0a.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#xpath-embedded-dsl">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Scales Xml" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Scales Xml">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Scales Xml
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              XPath Embedded DSL
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/chris-twiner/scalesXml/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    scales-xml
  </div>
</a>
</div>
<a class="md-header__button md-header-nav__button md-icon" href="../../pdf/document.pdf" title="PDF">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path d="M128,0c-17.6,0-32,14.4-32,32v448c0,17.6,14.4,32,32,32h320c17.6,0,32-14.4,32-32V128L352,0H128z" fill="#E2E5E7"></path>
<path d="m384 128h96l-128-128v96c0 17.6 14.4 32 32 32z" fill="#B0B7BD"></path>
<polygon fill="#CAD1D8" points="480 224 384 128 480 128"></polygon>
<path d="M416,416c0,8.8-7.2,16-16,16H48c-8.8,0-16-7.2-16-16V256c0-8.8,7.2-16,16-16h352c8.8,0,16,7.2,16,16  V416z" fill="#F15642"></path>
<g fill="#fff">
<path d="m101.74 303.15c0-4.224 3.328-8.832 8.688-8.832h29.552c16.64 0 31.616 11.136 31.616 32.48 0 20.224-14.976 31.488-31.616 31.488h-21.36v16.896c0 5.632-3.584 8.816-8.192 8.816-4.224 0-8.688-3.184-8.688-8.816v-72.032zm16.88 7.28v31.872h21.36c8.576 0 15.36-7.568 15.36-15.504 0-8.944-6.784-16.368-15.36-16.368h-21.36z"></path>
<path d="m196.66 384c-4.224 0-8.832-2.304-8.832-7.92v-72.672c0-4.592 4.608-7.936 8.832-7.936h29.296c58.464 0 57.184 88.528 1.152 88.528h-30.448zm8.064-72.912v57.312h21.232c34.544 0 36.08-57.312 0-57.312h-21.232z"></path>
<path d="m303.87 312.11v20.336h32.624c4.608 0 9.216 4.608 9.216 9.072 0 4.224-4.608 7.68-9.216 7.68h-32.624v26.864c0 4.48-3.184 7.92-7.664 7.92-5.632 0-9.072-3.44-9.072-7.92v-72.672c0-4.592 3.456-7.936 9.072-7.936h44.912c5.632 0 8.96 3.344 8.96 7.936 0 4.096-3.328 8.704-8.96 8.704h-37.248v0.016z"></path>
</g>
<path d="m400 432h-304v16h304c8.8 0 16-7.2 16-16v-16c0 8.8-7.2 16-16 16z" fill="#CAD1D8"></path>
</svg>
</a></nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
      Scales XML
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../Getting_Started/ScalesXmlIntro/">
        Getting Started
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../Parsing_XML/FullParsing/">
        Parsing XML
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="./">
        Accessing and Querying Data
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../Serializing_%26_Transforming_XML/SerializingIntro/">
        Serializing &amp; Transforming XML
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../Advanced/Technical_Details/OptimisationDetails/">
        Advanced
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../site/scales-xml_2.12/scaladocs/">
        Reference Material
      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Scales Xml" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Scales Xml">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    Scales Xml
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/chris-twiner/scalesXml/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    scales-xml
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Scales XML
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Getting_Started/ScalesXmlIntro/">
        Scales Xml Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Getting_Started/Setup/">
        Setup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Getting_Started/HowToUse/">
        How To Use
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Getting_Started/MemoryOptimisation/">
        Scales Xml Optimisation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Getting_Started/release_notes">
        None
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
          XML Model
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
          XML Model
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../XML_Model/QNames/">
        QNames
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../XML_Model/Elem/">
        Elem
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../XML_Model/Attributes/">
        Attributes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../XML_Model/XmlItem/">
        XmlItem
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../XML_Model/XmlDsl/">
        Xml DSL and Trees
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../XML_Model/OptionalDsl/">
        Optional Xml DSL
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../XML_Model/XmlVersionSupport/">
        Scales XML Version Support
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Parsing XML
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Parsing XML
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Parsing_XML/FullParsing/">
        Full XML Doc Parsing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Parsing_XML/PullParsing/">
        Pull Parsing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Parsing_XML/RepeatedSections/">
        Pulling Repeated Sections
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Parsing_XML/AsyncPull/">
        Async Pull
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Accessing and Querying Data
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Accessing and Querying Data
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          XPath Embedded DSL
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        XPath Embedded DSL
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#simple-usage-examples">
    Simple Usage Examples
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xpath-crash-course">
    XPath Crash Course
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xpath-axe">
    XPath Axe
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#node-tests">
    Node Tests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#predicates">
    Predicates
  </a>
<nav aria-label="Predicates" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#predicate-construction">
    Predicate Construction
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#chaining-predicates">
    Chaining Predicates
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#positional-predicates">
    Positional Predicates
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#direct-filtering">
    Direct Filtering
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#unsorted-results-and-views">
    Unsorted Results and Views
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../XPathFunctions/">
        XPath Functions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../StringXPaths/">
        XPath 1.0 String Evaluation
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Serializing &amp; Transforming XML
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Serializing &amp; Transforming XML
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Serializing_%26_Transforming_XML/SerializingIntro/">
        An Introduction to Serializing Xml With Scales
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Serializing_%26_Transforming_XML/Folding/">
        Folding Xml
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Serializing_%26_Transforming_XML/XSLT/">
        TrAX &amp; XSLT Support
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Advanced
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
          Technical Details
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_1">
<span class="md-nav__icon md-icon"></span>
          Technical Details
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Advanced/Technical_Details/OptimisationDetails/">
        Scales Xml Optimisation Details
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Advanced/Technical_Details/Serialization/">
        Serialising - Nitty Gritty
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
          XML Equality
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_2">
<span class="md-nav__icon md-icon"></span>
          XML Equality
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../Advanced/XML_Equality/EqualityBasics/">
        XML Equality Basics
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../Advanced/XML_Equality/XmlComparison/">
        XmlComparison - What, Where &amp; How Was It Different
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Reference Material
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Reference Material
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
          Scaladocs
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
          Scaladocs
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../site/scales-xml_2.12/scaladocs/">
        scales-xml
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../site/scales-xml-jaxen_2.12/scaladocs/">
        scales-xml-jaxen
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../site/scales-xml-aalto_2.12/scaladocs/">
        scales-xml-aalto
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
          Maven
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_2">
<span class="md-nav__icon md-icon"></span>
          Maven
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../site/">
        Root
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../site/scales-xml_2.12/">
        scales-xml
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../site/scales-xml-jaxen_2.12/">
        scales-xml-jaxen
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../site/scales-xml-aalto_2.12/">
        scales-xml-aalto
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#simple-usage-examples">
    Simple Usage Examples
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xpath-crash-course">
    XPath Crash Course
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xpath-axe">
    XPath Axe
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#node-tests">
    Node Tests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#predicates">
    Predicates
  </a>
<nav aria-label="Predicates" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#predicate-construction">
    Predicate Construction
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#chaining-predicates">
    Chaining Predicates
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#positional-predicates">
    Positional Predicates
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#direct-filtering">
    Direct Filtering
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#unsorted-results-and-views">
    Unsorted Results and Views
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="xpath-embedded-dsl">XPath Embedded DSL<a class="headerlink" href="#xpath-embedded-dsl" title="Permanent link">¶</a></h1>
<p>The XML XPath specifications allows navigation of XML documents via a DSL that describes routes through a document using a combination of axe, steps and predicates.  It has a limited number of these abstractions but together they create a powerful direct, whilst remaining simple to use, querying language.</p>
<p>Scales provides this power via both a traditional string based approach and an embedded DSL that leverages the power of Scalas syntactical flexibility to mimic the XPath syntax.</p>
<p>The DSL uses the existing Scales abstractions to the full, and works via a zipper over the XmlTree itself.  Each navigation step through the tree creates new zippers and new paths through the tree.</p>
<p>In every case possible (with the exception of the namespace:: axis) the range of behaviours closely follows the specification, like for like queries matching 100%.  Instead of matching on prefixes Scales uses fully qualified expanded QNames (qualifiedName in the <a href="../XPathFunctions/#qname-functions">QName Functions</a>) to match against, not requiring a prefix context within which to evaluate.</p>
<p>Internally, perhaps unsurprisingly, XPath is implemented as a combination of filter, map and flatMap.  When retrieving results (e.g. converting to an Iterable) the results are sorted into Document order, this can be expensive for large result sets (see <a href="#unsorted-results-and-views">Unsorted Results</a> for alternatives).</p>
<h2 id="simple-usage-examples">Simple Usage Examples<a class="headerlink" href="#simple-usage-examples" title="Permanent link">¶</a></h2>
<p>Given the following document:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Namespace</span><span class="p">(</span><span class="s">"test:uri"</span><span class="p">)</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">nsa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Namespace</span><span class="p">(</span><span class="s">"test:uri:attribs"</span><span class="p">)</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">nsp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nsa</span><span class="p">.</span><span class="n">prefixed</span><span class="p">(</span><span class="s">"pre"</span><span class="p">)</span>

<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="n">ns</span><span class="p">(</span><span class="s">"Elem"</span><span class="p">)</span><span class="w"> </span><span class="o">/@</span><span class="w"> </span><span class="p">(</span><span class="n">nsa</span><span class="p">(</span><span class="s">"pre"</span><span class="p">,</span><span class="w"> </span><span class="s">"attr1"</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"val1"</span><span class="p">,</span>
<span class="w">      	    	   </span><span class="s">"attr2"</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"val2"</span><span class="p">,</span>
<span class="w">		   </span><span class="n">nsp</span><span class="p">(</span><span class="s">"attr3"</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"val3"</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="p">(</span>
<span class="w">      </span><span class="n">ns</span><span class="p">(</span><span class="s">"Child"</span><span class="p">),</span>
<span class="w">      </span><span class="s">"Mixed Content"</span><span class="p">,</span>
<span class="w">      </span><span class="n">ns</span><span class="p">(</span><span class="s">"Child2"</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="p">(</span><span class="w"> </span><span class="n">ns</span><span class="p">(</span><span class="s">"Subchild"</span><span class="p">)</span><span class="w"> </span><span class="o">~&gt;</span><span class="w"> </span><span class="s">"text"</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
</code></pre></div>
<p>we can easily query for the Subchild:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="c1">// top produces a Path from a Tree, in this case an XPath</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">top</span><span class="p">(</span><span class="n">builder</span><span class="p">)</span>

<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">\*</span><span class="w"> </span><span class="n">ns</span><span class="p">(</span><span class="s">"Child2"</span><span class="p">)</span><span class="w"> </span><span class="o">\*</span><span class="w"> </span><span class="n">ns</span><span class="p">(</span><span class="s">"Subchild"</span><span class="p">)</span>
<span class="w">  </span><span class="n">res</span><span class="p">.</span><span class="n">size</span><span class="w"> </span><span class="c1">// 1</span>

<span class="w">  </span><span class="n">string</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="c1">// text</span>
<span class="w">  </span><span class="n">qname</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="c1">// Subchild</span>
</code></pre></div>
<h2 id="xpath-crash-course">XPath Crash Course<a class="headerlink" href="#xpath-crash-course" title="Permanent link">¶</a></h2>
<p>Scales Xml follows the XPath spec fairly closely and accordingly represents the concepts of context, location steps and axe, full details of which can be found in the <a href="http://www.w3.org/TR/xpath20/#id-path-expressions">XPath Standard</a>.</p>
<p>The context, which can be thought of as current "place" in the document, is represented by the following:</p>
<ul>
<li>a notional node - where we are in the document - an element, a text node, an attribute etc.</li>
<li>the position - index within a context and the size of this context</li>
</ul>
<p>Location steps are a combination of axe, node test and predicates e.g. <nowiki>/*fred</nowiki> which represents the child axe, element node test and a predicate against a no-namespace local name of "fred".</p>
<p>As the XPath adds more axe, steps and predicates the context changes, reducing or expanding possible matches as it develops.  Scales Xml's XPath DSL represents that context with the <a href="../../site/scales-xml_2.12/scaladocs/scales/xml/xpath.XPath.html">XPath</a> class, where each operation on that class returns another immutable instance for the next context.</p>
<p>As with XPath, Scales Xml predicates, axe and node tests can be chained with the current context (the self axe in XPath) always represented by the resulting Scales XPath object.  Only when the underlying results are used (for example by string or qname functions) do they leave the XPath object and get transformed into a, by default, ordered list of matching nodes.</p>
<h2 id="xpath-axe">XPath Axe<a class="headerlink" href="#xpath-axe" title="Permanent link">¶</a></h2>
<p>Scales supports the complete useful XPath axe, each of which can be used against a given context (an instance of <a href="../../site/scales-xml_2.12/scaladocs/scales/xml/xpath/XPath.html">Scales XPath</a>), for the full XPath axe details find the spec <a href="http://www.w3.org/TR/xpath20/#axes">here</a>:</p>
<p>{|class="genTable"
!XPath Axis
!Scales DSL
!Details
|-
|ancestor||ancestor_::||All the parents of this context
|-
|ancestor-or-self||ancestor_or_self::||All the parents of this context and this node
|-
|attribute||*@||All the attributes for a given context, is often combined directly with a name
|-</p>
<p>|child||\ or + to expand XmlItems||Children of this context. NB: \ alone in Scales DSL simply removes the initialNode setting required by \.  If the children should be expanded (e.g. to use .filter directly) then + will "unpack" the child nodes.
|-
|descendant||descendant_::||All children, and their children
|-
|descendant-or-self||descendant_or_self_::||This node and all descendants, also known as \
|-</p>
<p>|following||following_::||All nodes that follow this context in document order without child nodes of this context
|-
|following-sibling||following_sibling_::||All direct children of this contexts parent node that follow in document order.
|-
|parent||\^||The parent context of this context.  For elements it represents the parent eleemnt and for attributes the containing element.
|-</p>
<p>|preceding||preceding_::||All nodes that precede this context in document order excluding the parent nodes
|-
|preceding-sibling||preceding_sibling_::||All previous children of the parent in the current context in document order.
|-
|self||The XPath object itself via '''.'''||The current context node within a document.
|}</p>
<p>A commonly used abbreviation not listed above is of course \, which means descendant_or_self_::.  The difference being that \ also supports possible eager evaluation and as per the spec the notion of [<a href="http://www.w3.org/TR/xpath20/#id-path-expressions">http://www.w3.org/TR/xpath20/#id-path-expressions</a> \ in the beginning expression].</p>
<p>''NB Scales Embedded XPath DSL does not support the namespace axis - if you have a requirement for it then it can be looked at (please send an email to [mailto:<a href="mailto:scales-xml@googlegroups.com">scales-xml@googlegroups.com</a> the mailing list] to discuss possible improvements)''</p>
<h2 id="node-tests">Node Tests<a class="headerlink" href="#node-tests" title="Permanent link">¶</a></h2>
<p>Scales embedded XPath DSL views the majority of node tests as predicates</p>
<p>{|class="genTable"
!XPath Node Test
!Scales DSL
!Details
|-
|node()||.+||Returns a new context for all the children below a given context
|-
|text()||.text||Returns a new context for all the text and cdata below a given context
|-
|comment()||.comment||Returns a new context for all the comments below a given context
|}</p>
<p>Scales XML also adds:</p>
<ul>
<li>.textOnly - filters out CData, just giving text nodes</li>
<li>.cdata - provides CData nodes</li>
<li>.pi - provides processing instructions</li>
</ul>
<h2 id="predicates">Predicates<a class="headerlink" href="#predicates" title="Permanent link">¶</a></h2>
<p>There are three areas allowing for predicates within XPaths:</p>
<ul>
<li>Attributes</li>
<li>Elements</li>
<li>General</li>
</ul>
<p>The first two are special cased, as in the XPath spec, as they are the most heavily used predicates (using the above example document):</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="c1">// QName based match</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">attributeNamePredicates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">\@</span><span class="w"> </span><span class="n">nsp</span><span class="p">(</span><span class="s">"attr3"</span><span class="p">)</span>
<span class="w">  </span><span class="n">string</span><span class="p">(</span><span class="n">attributeNamePredicates</span><span class="p">)</span><span class="w"> </span><span class="c1">// "val3"</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// predicate based match</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">attributePredicates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">\@</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">string</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">"val3"</span><span class="w"> </span><span class="p">)</span>
<span class="w">  </span><span class="n">qualifiedName</span><span class="p">(</span><span class="n">attributePredicates</span><span class="p">)</span><span class="w"> </span><span class="c1">// {test:uri:attribs}attr3</span>

<span class="w">  </span><span class="c1">// Find child descendants that contain a Subchild </span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">elemsWithASubchild</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">\\*</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">\*</span><span class="w"> </span><span class="n">ns</span><span class="p">(</span><span class="s">"Subchild"</span><span class="p">))</span>
<span class="w">  </span><span class="n">string</span><span class="p">(</span><span class="n">elemsWithASubchild</span><span class="p">)</span><span class="w"> </span><span class="c1">// text</span>
<span class="w">  </span><span class="n">qualifiedName</span><span class="p">(</span><span class="n">elemsWithASubchild</span><span class="p">)</span><span class="w"> </span><span class="c1">// {test:uri}Child2</span>
</code></pre></div>
<p>In each case the XmlPath (or AttributePath) is passed to the predicate with a number of shortcuts for the common QName based matches and positional matches for elements:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">\*</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="c1">// path \* 2 is also valid but doesn't read like \*[2]</span>
<span class="w">  </span><span class="n">qname</span><span class="p">(</span><span class="n">second</span><span class="p">)</span><span class="w"> </span><span class="c1">// Child2</span>
</code></pre></div>
<p>The developer can chose to ignore namespaces (not recommended) by using the <em>:</em> and <em>:@ predicates instead (equivalent to string xpath /</em>[local-name() = "x"]).</p>
<h3 id="predicate-construction">Predicate Construction<a class="headerlink" href="#predicate-construction" title="Permanent link">¶</a></h3>
<p>All the predicates in Scales are built from two simple building blocks:</p>
<ol>
<li>XmlPath =&gt; Boolean - via the XPath.filter function</li>
<li>AttributePath =&gt; Boolean - via the <a href="../../site/scales-xml_2.12/scaladocs/scales/xml/xpath/AttributeAxis.html">AttributeAxis</a>.*@ function</li>
</ol>
<p>The various base node types and filters are based on these functions, for example the element predicate * is implemented as:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">*</span><span class="p">(</span><span class="n">pred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">XmlPath</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Boolean</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">XPath</span><span class="p">[</span><span class="nc">T</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">  </span><span class="n">filter</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">isItem</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">pred</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</code></pre></div>
<p>In turn * can be seen as a combination of the \ child step and the * predicate (via xflatMap) and is provided as syntactic sugar.</p>
<p>Similarly text is implemented using filter.</p>
<p>All of the standard set of predicates (and axis combinations) can be found in the  <a href="../../site/scales-xml_2.12/scaladocs/scales/xml/xpath/XPath.html">XPath</a> ScalaDoc.  Clicking the right arrow for many of the functions will lead you to the Definition Classes docs and their code. </p>
<h3 id="chaining-predicates">Chaining Predicates<a class="headerlink" href="#chaining-predicates" title="Permanent link">¶</a></h3>
<p>Predicates can be chained on the context itself, i.e. the XPath object, for example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="n">pathsCombinedPredicates</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">root</span><span class="p">.</span><span class="o">\*</span><span class="p">(</span><span class="n">ns</span><span class="p">(</span><span class="s">"Child"</span><span class="p">)).</span>
<span class="w">      </span><span class="o">*</span><span class="p">(</span><span class="n">_</span><span class="p">.</span><span class="o">\@</span><span class="p">(</span><span class="w"> </span><span class="n">nsp</span><span class="p">(</span><span class="s">"attr3"</span><span class="p">)</span><span class="w"> </span><span class="p">))</span><span class="w"> </span><span class="c1">// context is still Child matches, but has additionally reduced it to only items with an attribute of attr3</span>
</code></pre></div>
<p>This represents <nowiki>/root/*ns:Child[.@nsp:attr3]</nowiki> where the * Scales Xml element predicate allows matching on the self axis.  The same chaining is available on the attribute axis represented by the [./doc/scales/xml/xpath/AttributePaths.html AttributePaths] class.</p>
<h3 id="positional-predicates">Positional Predicates<a class="headerlink" href="#positional-predicates" title="Permanent link">¶</a></h3>
<p>{|class="genTable"
!XPath Position Function
!Scales DSL
!Details
|-
|position()||pos_&lt;, pos_==, pos() and pos_&gt;||Functions to work against the current position within a context
|-
|last()||last_&lt;, last_== and last_&gt;||Functions that work against the size of a given context
|-
|position() == last()||pos_eq_last||Take the last item in a context
|}</p>
<p>These, more difficult to model, positional tests can be leveraged the same way as position() and last() can be in XPath.</p>
<p>So, for example:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="c1">// /*[position() = last()]</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">theLast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="o">\</span><span class="p">.</span><span class="n">pos_eq_last</span>
<span class="w">  </span><span class="n">qname</span><span class="p">(</span><span class="n">theLast</span><span class="p">)</span><span class="w"> </span><span class="c1">// Elem</span>

<span class="w">  </span><span class="c1">// //*[position() = last()]</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">allLasts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="o">\\*</span><span class="p">.</span><span class="n">pos_eq_last</span>
<span class="w">  </span><span class="n">allLasts</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">qname</span><span class="p">(</span><span class="n">_</span><span class="p">))</span><span class="w"> </span><span class="c1">// List(Elem, Child2, Subchild)</span>

<span class="w">  </span><span class="c1">// all elems with more than one child</span>
<span class="w">  </span><span class="c1">// //*[ ./*[last() &gt; 1]]</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">moreThanOne</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="o">\\*</span><span class="p">(</span><span class="w"> </span><span class="n">_</span><span class="p">.</span><span class="o">\*</span><span class="p">.</span><span class="n">last_&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">  </span><span class="n">qname</span><span class="p">(</span><span class="n">moreThanOne</span><span class="p">)</span><span class="w"> </span><span class="c1">// Elem</span>

<span class="w">  </span><span class="c1">// all elems that aren't the first child</span>
<span class="w">  </span><span class="c1">// //*[ position() &gt; 1]</span>
<span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">notFirst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="o">\\*</span><span class="p">.</span><span class="n">pos_&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">qname</span><span class="p">(</span><span class="n">notFirst</span><span class="p">)</span><span class="w"> </span><span class="c1">// Child2</span>
</code></pre></div>
<h3 id="direct-filtering">Direct Filtering<a class="headerlink" href="#direct-filtering" title="Permanent link">¶</a></h3>
<p>The xflatMap, xmap, xfilter and filter methods allow extra predicate usage where the existing XPath 1.0 functions don't suffice.</p>
<p>The filter method accepts a simple XmlPath =&gt; Boolean, whereas the other varieties work on the matching sets themselves.</p>
<p>It is not recommended to use these functions for general use as they primarily exist for internal re-use.</p>
<h2 id="unsorted-results-and-views">Unsorted Results and Views<a class="headerlink" href="#unsorted-results-and-views" title="Permanent link">¶</a></h2>
<p>In order to meet XPath expected usage results are sorted in Document order and checked for duplicates.  If this is not necessary - but speed of matching over a result set is (for example lazy querying over a large set) - then the raw functions (either raw or rawLazy) are good choices.</p>
<p>The viewed function however uses views as its default type and may help add further lazy evaluation.  Whilst tests have shown lazy evaluation takes place its worth profiling your application to see if it actually impacts performance in an expected fashion.</p>
<p>See the <a href="../../site/scales-xml_2.12/scaladocs/scales/xml/xpath/XmlPaths.html">XmlPaths trait</a> for more information.</p>
<hr/>
<div class="md-source-file">
<small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">December 27, 2023 11:48:21</span>
<br/>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">December 27, 2023 11:48:21</span>
</small>
</div>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.expand", "content.code.copy"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
<script src="../../assets/javascripts/bundle.fc8c2696.min.js"></script>
</body>
</html>